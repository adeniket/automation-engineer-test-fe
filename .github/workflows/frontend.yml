name: Assesment Frontend Automation
on:
   pull_request:
        branches: [ main, master ]
jobs:
    build:
        name: automation-engineer-test-fe
        runs-on: ubuntu-latest
        steps:
         - name: Checkout Repository
           uses: actions/checkout@v3
         - name: install dependencies
           run: npm install  
         - name: Cypress run
           uses: cypress-io/github-action@v6
           with:
             start: npm run dev
             wait-on: 'http://localhost:5173/login' 
           env:
              VITE_API_BASE_URL: https://automation-engineer-test-be.onrender.com/api
              VITE_DISABLE_API_CACHING: true
            #  - name: Run tests
            #    run: npx cypress run
         - name: Generate Allure Report
           if: always()
           run: npx allure-commandline generate allure-results --clean --single-file --output ./cypress/report
         - name: Upload Allure Report
           if: always()
           uses: actions/upload-artifact@v4
           with:
             name: allure-reports
             path: ./cypress/report
           